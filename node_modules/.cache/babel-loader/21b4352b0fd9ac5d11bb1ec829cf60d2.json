{"ast":null,"code":"var _jsxFileName = \"/Users/liuyang/Documents/yideng/jira/src/context/auth-context.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React from \"react\";\nimport { useState } from \"react\";\nimport * as auth from \"auth-provider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst bootstrapUser = () => {};\n\nconst AuthConetxt = /*#__PURE__*/React.createContext(undefined);\nAuthConetxt.displayName = \"AuthConetxt\";\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n\n  const [user, setUser] = useState(null);\n\n  const login = form => auth.login(form).then(setUser);\n\n  const register = form => auth.register(form).then(setUser);\n\n  const logout = () => auth.logout().then(() => setUser(null));\n\n  return /*#__PURE__*/_jsxDEV(AuthConetxt.Provider, {\n    children: children,\n    value: {\n      user,\n      login,\n      register,\n      logout\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 12\n  }, this);\n};\n\n_s(AuthProvider, \"Iei9RGtZU29Y1RhBe1sbfh/MntA=\");\n\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n\n  const context = React.useContext(AuthConetxt);\n\n  if (!context) {\n    throw new Error('useAuth必须在AuthProvider中使用');\n  }\n\n  return context;\n};\n\n_s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["/Users/liuyang/Documents/yideng/jira/src/context/auth-context.tsx"],"names":["React","useState","auth","bootstrapUser","AuthConetxt","createContext","undefined","displayName","AuthProvider","children","user","setUser","login","form","then","register","logout","useAuth","context","useContext","Error"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,OAAO,KAAKC,IAAZ,MAAsB,eAAtB;;;AASA,MAAMC,aAAa,GAAG,MAAM,CAE3B,CAFD;;AAIA,MAAMC,WAAW,gBAAGJ,KAAK,CAACK,aAAN,CAKlBC,SALkB,CAApB;AAMAF,WAAW,CAACG,WAAZ,GAA0B,aAA1B;AAEA,OAAO,MAAMC,YAAY,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAsC;AAAA;;AAC9D,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAgB,IAAhB,CAAhC;;AACA,QAAMW,KAAK,GAAIC,IAAD,IAAoBX,IAAI,CAACU,KAAL,CAAWC,IAAX,EAAiBC,IAAjB,CAAsBH,OAAtB,CAAlC;;AACA,QAAMI,QAAQ,GAAIF,IAAD,IAAoBX,IAAI,CAACa,QAAL,CAAcF,IAAd,EAAoBC,IAApB,CAAyBH,OAAzB,CAArC;;AACA,QAAMK,MAAM,GAAG,MAAMd,IAAI,CAACc,MAAL,GAAcF,IAAd,CAAmB,MAAMH,OAAO,CAAC,IAAD,CAAhC,CAArB;;AAEA,sBAAO,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,QAAQ,EAAEF,QAAhC;AAA0C,IAAA,KAAK,EAAE;AAACC,MAAAA,IAAD;AAAOE,MAAAA,KAAP;AAAcG,MAAAA,QAAd;AAAwBC,MAAAA;AAAxB;AAAjD;AAAA;AAAA;AAAA;AAAA,UAAP;AACH,CAPM;;GAAMR,Y;;KAAAA,Y;AASb,OAAO,MAAMS,OAAO,GAAG,MAAM;AAAA;;AACzB,QAAMC,OAAO,GAAGlB,KAAK,CAACmB,UAAN,CAAiBf,WAAjB,CAAhB;;AACA,MAAI,CAACc,OAAL,EAAc;AACV,UAAM,IAAIE,KAAJ,CAAU,2BAAV,CAAN;AACH;;AACD,SAAOF,OAAP;AACH,CANM;;IAAMD,O","sourcesContent":["import React from \"react\"\nimport { useState } from \"react\"\nimport * as auth from \"auth-provider\"\nimport {User} from 'screens/project-list/search-panel'\nimport {ReactNode} from 'react'\n\ninterface AuthForm {\n    username: string,\n    password: string\n}\n\nconst bootstrapUser = () => {\n    \n}\n\nconst AuthConetxt = React.createContext<\n    {user: User | null,\n    login: (form: AuthForm) => Promise<void>,\n    register: (form: AuthForm) => Promise<void>,\n    logout: () => Promise<void>} | undefined\n>(undefined)\nAuthConetxt.displayName = \"AuthConetxt\"\n\nexport const AuthProvider = ({children}: {children:ReactNode}) => {\n    const [user, setUser] = useState< User | null >(null)\n    const login = (form: AuthForm) => auth.login(form).then(setUser)\n    const register = (form: AuthForm) => auth.register(form).then(setUser)\n    const logout = () => auth.logout().then(() => setUser(null))\n\n    return <AuthConetxt.Provider children={children} value={{user, login, register, logout}} />\n}\n\nexport const useAuth = () => {\n    const context = React.useContext(AuthConetxt)\n    if (!context) {\n        throw new Error('useAuth必须在AuthProvider中使用')\n    }\n    return context;\n}"]},"metadata":{},"sourceType":"module"}