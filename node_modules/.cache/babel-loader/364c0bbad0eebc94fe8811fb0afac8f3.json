{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = SubMenu;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _rcOverflow = _interopRequireDefault(require(\"rc-overflow\"));\n\nvar _warning = _interopRequireDefault(require(\"rc-util/lib/warning\"));\n\nvar _SubMenuList = _interopRequireDefault(require(\"./SubMenuList\"));\n\nvar _nodeUtil = require(\"../utils/nodeUtil\");\n\nvar _MenuContext = _interopRequireWildcard(require(\"../context/MenuContext\"));\n\nvar _useMemoCallback = _interopRequireDefault(require(\"../hooks/useMemoCallback\"));\n\nvar _PopupTrigger = _interopRequireDefault(require(\"./PopupTrigger\"));\n\nvar _Icon = _interopRequireDefault(require(\"../Icon\"));\n\nvar _useActive2 = _interopRequireDefault(require(\"../hooks/useActive\"));\n\nvar _warnUtil = require(\"../utils/warnUtil\");\n\nvar _useDirectionStyle = _interopRequireDefault(require(\"../hooks/useDirectionStyle\"));\n\nvar _InlineSubMenuList = _interopRequireDefault(require(\"./InlineSubMenuList\"));\n\nvar _PathContext = require(\"../context/PathContext\");\n\nvar _IdContext = require(\"../context/IdContext\");\n\nvar _excluded = [\"style\", \"className\", \"title\", \"eventKey\", \"warnKey\", \"disabled\", \"internalPopupClose\", \"children\", \"itemIcon\", \"expandIcon\", \"popupClassName\", \"popupOffset\", \"onClick\", \"onMouseEnter\", \"onMouseLeave\", \"onTitleClick\", \"onTitleMouseEnter\", \"onTitleMouseLeave\"],\n    _excluded2 = [\"active\"];\n\nvar InternalSubMenu = function InternalSubMenu(props) {\n  var _classNames;\n\n  var style = props.style,\n      className = props.className,\n      title = props.title,\n      eventKey = props.eventKey,\n      warnKey = props.warnKey,\n      disabled = props.disabled,\n      internalPopupClose = props.internalPopupClose,\n      children = props.children,\n      itemIcon = props.itemIcon,\n      expandIcon = props.expandIcon,\n      popupClassName = props.popupClassName,\n      popupOffset = props.popupOffset,\n      onClick = props.onClick,\n      onMouseEnter = props.onMouseEnter,\n      onMouseLeave = props.onMouseLeave,\n      onTitleClick = props.onTitleClick,\n      onTitleMouseEnter = props.onTitleMouseEnter,\n      onTitleMouseLeave = props.onTitleMouseLeave,\n      restProps = (0, _objectWithoutProperties2.default)(props, _excluded);\n  var domDataId = (0, _IdContext.useMenuId)(eventKey);\n\n  var _React$useContext = React.useContext(_MenuContext.MenuContext),\n      prefixCls = _React$useContext.prefixCls,\n      mode = _React$useContext.mode,\n      openKeys = _React$useContext.openKeys,\n      contextDisabled = _React$useContext.disabled,\n      overflowDisabled = _React$useContext.overflowDisabled,\n      activeKey = _React$useContext.activeKey,\n      selectedKeys = _React$useContext.selectedKeys,\n      contextItemIcon = _React$useContext.itemIcon,\n      contextExpandIcon = _React$useContext.expandIcon,\n      onItemClick = _React$useContext.onItemClick,\n      onOpenChange = _React$useContext.onOpenChange,\n      onActive = _React$useContext.onActive;\n\n  var _React$useContext2 = React.useContext(_PathContext.PathUserContext),\n      isSubPathKey = _React$useContext2.isSubPathKey;\n\n  var connectedPath = (0, _PathContext.useFullPath)();\n  var subMenuPrefixCls = \"\".concat(prefixCls, \"-submenu\");\n  var mergedDisabled = contextDisabled || disabled;\n  var elementRef = React.useRef();\n  var popupRef = React.useRef(); // ================================ Warn ================================\n\n  if (process.env.NODE_ENV !== 'production' && warnKey) {\n    (0, _warning.default)(false, 'SubMenu should not leave undefined `key`.');\n  } // ================================ Icon ================================\n\n\n  var mergedItemIcon = itemIcon || contextItemIcon;\n  var mergedExpandIcon = expandIcon || contextExpandIcon; // ================================ Open ================================\n\n  var originOpen = openKeys.includes(eventKey);\n  var open = !overflowDisabled && originOpen; // =============================== Select ===============================\n\n  var childrenSelected = isSubPathKey(selectedKeys, eventKey); // =============================== Active ===============================\n\n  var _useActive = (0, _useActive2.default)(eventKey, mergedDisabled, onTitleMouseEnter, onTitleMouseLeave),\n      active = _useActive.active,\n      activeProps = (0, _objectWithoutProperties2.default)(_useActive, _excluded2); // Fallback of active check to avoid hover on menu title or disabled item\n\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n      childrenActive = _React$useState2[0],\n      setChildrenActive = _React$useState2[1];\n\n  var triggerChildrenActive = function triggerChildrenActive(newActive) {\n    if (!mergedDisabled) {\n      setChildrenActive(newActive);\n    }\n  };\n\n  var onInternalMouseEnter = function onInternalMouseEnter(domEvent) {\n    triggerChildrenActive(true);\n    onMouseEnter === null || onMouseEnter === void 0 ? void 0 : onMouseEnter({\n      key: eventKey,\n      domEvent: domEvent\n    });\n  };\n\n  var onInternalMouseLeave = function onInternalMouseLeave(domEvent) {\n    triggerChildrenActive(false);\n    onMouseLeave === null || onMouseLeave === void 0 ? void 0 : onMouseLeave({\n      key: eventKey,\n      domEvent: domEvent\n    });\n  };\n\n  var mergedActive = React.useMemo(function () {\n    if (active) {\n      return active;\n    }\n\n    if (mode !== 'inline') {\n      return childrenActive || isSubPathKey([activeKey], eventKey);\n    }\n\n    return false;\n  }, [mode, active, activeKey, childrenActive, eventKey, isSubPathKey]); // ========================== DirectionStyle ==========================\n\n  var directionStyle = (0, _useDirectionStyle.default)(connectedPath.length); // =============================== Events ===============================\n  // >>>> Title click\n\n  var onInternalTitleClick = function onInternalTitleClick(e) {\n    // Skip if disabled\n    if (mergedDisabled) {\n      return;\n    }\n\n    onTitleClick === null || onTitleClick === void 0 ? void 0 : onTitleClick({\n      key: eventKey,\n      domEvent: e\n    }); // Trigger open by click when mode is `inline`\n\n    if (mode === 'inline') {\n      onOpenChange(eventKey, !originOpen);\n    }\n  }; // >>>> Context for children click\n\n\n  var onMergedItemClick = (0, _useMemoCallback.default)(function (info) {\n    onClick === null || onClick === void 0 ? void 0 : onClick((0, _warnUtil.warnItemProp)(info));\n    onItemClick(info);\n  }); // >>>>> Visible change\n\n  var onPopupVisibleChange = function onPopupVisibleChange(newVisible) {\n    if (mode !== 'inline') {\n      onOpenChange(eventKey, newVisible);\n    }\n  };\n  /**\n   * Used for accessibility. Helper will focus element without key board.\n   * We should manually trigger an active\n   */\n\n\n  var onInternalFocus = function onInternalFocus() {\n    onActive(eventKey);\n  }; // =============================== Render ===============================\n\n\n  var popupId = domDataId && \"\".concat(domDataId, \"-popup\"); // >>>>> Title\n\n  var titleNode = /*#__PURE__*/React.createElement(\"div\", (0, _extends2.default)({\n    role: \"menuitem\",\n    style: directionStyle,\n    className: \"\".concat(subMenuPrefixCls, \"-title\"),\n    tabIndex: mergedDisabled ? null : -1,\n    ref: elementRef,\n    title: typeof title === 'string' ? title : null,\n    \"data-menu-id\": overflowDisabled && domDataId ? null : domDataId,\n    \"aria-expanded\": open,\n    \"aria-haspopup\": true,\n    \"aria-controls\": popupId,\n    \"aria-disabled\": mergedDisabled,\n    onClick: onInternalTitleClick,\n    onFocus: onInternalFocus\n  }, activeProps), title, /*#__PURE__*/React.createElement(_Icon.default, {\n    icon: mode !== 'horizontal' ? mergedExpandIcon : null,\n    props: (0, _objectSpread2.default)((0, _objectSpread2.default)({}, props), {}, {\n      isOpen: open,\n      // [Legacy] Not sure why need this mark\n      isSubMenu: true\n    })\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"\".concat(subMenuPrefixCls, \"-arrow\")\n  }))); // Cache mode if it change to `inline` which do not have popup motion\n\n  var triggerModeRef = React.useRef(mode);\n\n  if (mode !== 'inline') {\n    triggerModeRef.current = connectedPath.length > 1 ? 'vertical' : mode;\n  }\n\n  if (!overflowDisabled) {\n    var triggerMode = triggerModeRef.current; // Still wrap with Trigger here since we need avoid react re-mount dom node\n    // Which makes motion failed\n\n    titleNode = /*#__PURE__*/React.createElement(_PopupTrigger.default, {\n      mode: triggerMode,\n      prefixCls: subMenuPrefixCls,\n      visible: !internalPopupClose && open && mode !== 'inline',\n      popupClassName: popupClassName,\n      popupOffset: popupOffset,\n      popup: /*#__PURE__*/React.createElement(_MenuContext.default // Special handle of horizontal mode\n      , {\n        mode: triggerMode === 'horizontal' ? 'vertical' : triggerMode\n      }, /*#__PURE__*/React.createElement(_SubMenuList.default, {\n        id: popupId,\n        ref: popupRef\n      }, children)),\n      disabled: mergedDisabled,\n      onVisibleChange: onPopupVisibleChange\n    }, titleNode);\n  } // >>>>> Render\n\n\n  return /*#__PURE__*/React.createElement(_MenuContext.default, {\n    onItemClick: onMergedItemClick,\n    mode: mode === 'horizontal' ? 'vertical' : mode,\n    itemIcon: mergedItemIcon,\n    expandIcon: mergedExpandIcon\n  }, /*#__PURE__*/React.createElement(_rcOverflow.default.Item, (0, _extends2.default)({\n    role: \"none\"\n  }, restProps, {\n    component: \"li\",\n    style: style,\n    className: (0, _classnames.default)(subMenuPrefixCls, \"\".concat(subMenuPrefixCls, \"-\").concat(mode), className, (_classNames = {}, (0, _defineProperty2.default)(_classNames, \"\".concat(subMenuPrefixCls, \"-open\"), open), (0, _defineProperty2.default)(_classNames, \"\".concat(subMenuPrefixCls, \"-active\"), mergedActive), (0, _defineProperty2.default)(_classNames, \"\".concat(subMenuPrefixCls, \"-selected\"), childrenSelected), (0, _defineProperty2.default)(_classNames, \"\".concat(subMenuPrefixCls, \"-disabled\"), mergedDisabled), _classNames)),\n    onMouseEnter: onInternalMouseEnter,\n    onMouseLeave: onInternalMouseLeave\n  }), titleNode, !overflowDisabled && /*#__PURE__*/React.createElement(_InlineSubMenuList.default, {\n    id: popupId,\n    open: open,\n    keyPath: connectedPath\n  }, children)));\n};\n\nfunction SubMenu(props) {\n  var eventKey = props.eventKey,\n      children = props.children;\n  var connectedKeyPath = (0, _PathContext.useFullPath)(eventKey);\n  var childList = (0, _nodeUtil.parseChildren)(children, connectedKeyPath); // ==================== Record KeyPath ====================\n\n  var measure = (0, _PathContext.useMeasure)(); // eslint-disable-next-line consistent-return\n\n  React.useEffect(function () {\n    if (measure) {\n      measure.registerPath(eventKey, connectedKeyPath);\n      return function () {\n        measure.unregisterPath(eventKey, connectedKeyPath);\n      };\n    }\n  }, [connectedKeyPath]);\n  var renderNode; // ======================== Render ========================\n\n  if (measure) {\n    renderNode = childList;\n  } else {\n    renderNode = /*#__PURE__*/React.createElement(InternalSubMenu, props, childList);\n  }\n\n  return /*#__PURE__*/React.createElement(_PathContext.PathTrackerContext.Provider, {\n    value: connectedKeyPath\n  }, renderNode);\n}","map":{"version":3,"sources":["/Users/liuyang/Documents/yideng/jira/node_modules/rc-menu/lib/SubMenu/index.js"],"names":["_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","SubMenu","_defineProperty2","_extends2","_objectSpread2","_slicedToArray2","_objectWithoutProperties2","React","_classnames","_rcOverflow","_warning","_SubMenuList","_nodeUtil","_MenuContext","_useMemoCallback","_PopupTrigger","_Icon","_useActive2","_warnUtil","_useDirectionStyle","_InlineSubMenuList","_PathContext","_IdContext","_excluded","_excluded2","InternalSubMenu","props","_classNames","style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave","restProps","domDataId","useMenuId","_React$useContext","useContext","MenuContext","prefixCls","mode","openKeys","contextDisabled","overflowDisabled","activeKey","selectedKeys","contextItemIcon","contextExpandIcon","onItemClick","onOpenChange","onActive","_React$useContext2","PathUserContext","isSubPathKey","connectedPath","useFullPath","subMenuPrefixCls","concat","mergedDisabled","elementRef","useRef","popupRef","process","env","NODE_ENV","mergedItemIcon","mergedExpandIcon","originOpen","includes","open","childrenSelected","_useActive","active","activeProps","_React$useState","useState","_React$useState2","childrenActive","setChildrenActive","triggerChildrenActive","newActive","onInternalMouseEnter","domEvent","key","onInternalMouseLeave","mergedActive","useMemo","directionStyle","length","onInternalTitleClick","e","onMergedItemClick","info","warnItemProp","onPopupVisibleChange","newVisible","onInternalFocus","popupId","titleNode","createElement","role","tabIndex","ref","onFocus","icon","isOpen","isSubMenu","triggerModeRef","current","triggerMode","visible","popup","id","onVisibleChange","Item","component","keyPath","connectedKeyPath","childList","parseChildren","measure","useMeasure","useEffect","registerPath","unregisterPath","renderNode","PathTrackerContext","Provider"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = SubMenu;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _rcOverflow = _interopRequireDefault(require(\"rc-overflow\"));\n\nvar _warning = _interopRequireDefault(require(\"rc-util/lib/warning\"));\n\nvar _SubMenuList = _interopRequireDefault(require(\"./SubMenuList\"));\n\nvar _nodeUtil = require(\"../utils/nodeUtil\");\n\nvar _MenuContext = _interopRequireWildcard(require(\"../context/MenuContext\"));\n\nvar _useMemoCallback = _interopRequireDefault(require(\"../hooks/useMemoCallback\"));\n\nvar _PopupTrigger = _interopRequireDefault(require(\"./PopupTrigger\"));\n\nvar _Icon = _interopRequireDefault(require(\"../Icon\"));\n\nvar _useActive2 = _interopRequireDefault(require(\"../hooks/useActive\"));\n\nvar _warnUtil = require(\"../utils/warnUtil\");\n\nvar _useDirectionStyle = _interopRequireDefault(require(\"../hooks/useDirectionStyle\"));\n\nvar _InlineSubMenuList = _interopRequireDefault(require(\"./InlineSubMenuList\"));\n\nvar _PathContext = require(\"../context/PathContext\");\n\nvar _IdContext = require(\"../context/IdContext\");\n\nvar _excluded = [\"style\", \"className\", \"title\", \"eventKey\", \"warnKey\", \"disabled\", \"internalPopupClose\", \"children\", \"itemIcon\", \"expandIcon\", \"popupClassName\", \"popupOffset\", \"onClick\", \"onMouseEnter\", \"onMouseLeave\", \"onTitleClick\", \"onTitleMouseEnter\", \"onTitleMouseLeave\"],\n    _excluded2 = [\"active\"];\n\nvar InternalSubMenu = function InternalSubMenu(props) {\n  var _classNames;\n\n  var style = props.style,\n      className = props.className,\n      title = props.title,\n      eventKey = props.eventKey,\n      warnKey = props.warnKey,\n      disabled = props.disabled,\n      internalPopupClose = props.internalPopupClose,\n      children = props.children,\n      itemIcon = props.itemIcon,\n      expandIcon = props.expandIcon,\n      popupClassName = props.popupClassName,\n      popupOffset = props.popupOffset,\n      onClick = props.onClick,\n      onMouseEnter = props.onMouseEnter,\n      onMouseLeave = props.onMouseLeave,\n      onTitleClick = props.onTitleClick,\n      onTitleMouseEnter = props.onTitleMouseEnter,\n      onTitleMouseLeave = props.onTitleMouseLeave,\n      restProps = (0, _objectWithoutProperties2.default)(props, _excluded);\n  var domDataId = (0, _IdContext.useMenuId)(eventKey);\n\n  var _React$useContext = React.useContext(_MenuContext.MenuContext),\n      prefixCls = _React$useContext.prefixCls,\n      mode = _React$useContext.mode,\n      openKeys = _React$useContext.openKeys,\n      contextDisabled = _React$useContext.disabled,\n      overflowDisabled = _React$useContext.overflowDisabled,\n      activeKey = _React$useContext.activeKey,\n      selectedKeys = _React$useContext.selectedKeys,\n      contextItemIcon = _React$useContext.itemIcon,\n      contextExpandIcon = _React$useContext.expandIcon,\n      onItemClick = _React$useContext.onItemClick,\n      onOpenChange = _React$useContext.onOpenChange,\n      onActive = _React$useContext.onActive;\n\n  var _React$useContext2 = React.useContext(_PathContext.PathUserContext),\n      isSubPathKey = _React$useContext2.isSubPathKey;\n\n  var connectedPath = (0, _PathContext.useFullPath)();\n  var subMenuPrefixCls = \"\".concat(prefixCls, \"-submenu\");\n  var mergedDisabled = contextDisabled || disabled;\n  var elementRef = React.useRef();\n  var popupRef = React.useRef(); // ================================ Warn ================================\n\n  if (process.env.NODE_ENV !== 'production' && warnKey) {\n    (0, _warning.default)(false, 'SubMenu should not leave undefined `key`.');\n  } // ================================ Icon ================================\n\n\n  var mergedItemIcon = itemIcon || contextItemIcon;\n  var mergedExpandIcon = expandIcon || contextExpandIcon; // ================================ Open ================================\n\n  var originOpen = openKeys.includes(eventKey);\n  var open = !overflowDisabled && originOpen; // =============================== Select ===============================\n\n  var childrenSelected = isSubPathKey(selectedKeys, eventKey); // =============================== Active ===============================\n\n  var _useActive = (0, _useActive2.default)(eventKey, mergedDisabled, onTitleMouseEnter, onTitleMouseLeave),\n      active = _useActive.active,\n      activeProps = (0, _objectWithoutProperties2.default)(_useActive, _excluded2); // Fallback of active check to avoid hover on menu title or disabled item\n\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n      childrenActive = _React$useState2[0],\n      setChildrenActive = _React$useState2[1];\n\n  var triggerChildrenActive = function triggerChildrenActive(newActive) {\n    if (!mergedDisabled) {\n      setChildrenActive(newActive);\n    }\n  };\n\n  var onInternalMouseEnter = function onInternalMouseEnter(domEvent) {\n    triggerChildrenActive(true);\n    onMouseEnter === null || onMouseEnter === void 0 ? void 0 : onMouseEnter({\n      key: eventKey,\n      domEvent: domEvent\n    });\n  };\n\n  var onInternalMouseLeave = function onInternalMouseLeave(domEvent) {\n    triggerChildrenActive(false);\n    onMouseLeave === null || onMouseLeave === void 0 ? void 0 : onMouseLeave({\n      key: eventKey,\n      domEvent: domEvent\n    });\n  };\n\n  var mergedActive = React.useMemo(function () {\n    if (active) {\n      return active;\n    }\n\n    if (mode !== 'inline') {\n      return childrenActive || isSubPathKey([activeKey], eventKey);\n    }\n\n    return false;\n  }, [mode, active, activeKey, childrenActive, eventKey, isSubPathKey]); // ========================== DirectionStyle ==========================\n\n  var directionStyle = (0, _useDirectionStyle.default)(connectedPath.length); // =============================== Events ===============================\n  // >>>> Title click\n\n  var onInternalTitleClick = function onInternalTitleClick(e) {\n    // Skip if disabled\n    if (mergedDisabled) {\n      return;\n    }\n\n    onTitleClick === null || onTitleClick === void 0 ? void 0 : onTitleClick({\n      key: eventKey,\n      domEvent: e\n    }); // Trigger open by click when mode is `inline`\n\n    if (mode === 'inline') {\n      onOpenChange(eventKey, !originOpen);\n    }\n  }; // >>>> Context for children click\n\n\n  var onMergedItemClick = (0, _useMemoCallback.default)(function (info) {\n    onClick === null || onClick === void 0 ? void 0 : onClick((0, _warnUtil.warnItemProp)(info));\n    onItemClick(info);\n  }); // >>>>> Visible change\n\n  var onPopupVisibleChange = function onPopupVisibleChange(newVisible) {\n    if (mode !== 'inline') {\n      onOpenChange(eventKey, newVisible);\n    }\n  };\n  /**\n   * Used for accessibility. Helper will focus element without key board.\n   * We should manually trigger an active\n   */\n\n\n  var onInternalFocus = function onInternalFocus() {\n    onActive(eventKey);\n  }; // =============================== Render ===============================\n\n\n  var popupId = domDataId && \"\".concat(domDataId, \"-popup\"); // >>>>> Title\n\n  var titleNode = /*#__PURE__*/React.createElement(\"div\", (0, _extends2.default)({\n    role: \"menuitem\",\n    style: directionStyle,\n    className: \"\".concat(subMenuPrefixCls, \"-title\"),\n    tabIndex: mergedDisabled ? null : -1,\n    ref: elementRef,\n    title: typeof title === 'string' ? title : null,\n    \"data-menu-id\": overflowDisabled && domDataId ? null : domDataId,\n    \"aria-expanded\": open,\n    \"aria-haspopup\": true,\n    \"aria-controls\": popupId,\n    \"aria-disabled\": mergedDisabled,\n    onClick: onInternalTitleClick,\n    onFocus: onInternalFocus\n  }, activeProps), title, /*#__PURE__*/React.createElement(_Icon.default, {\n    icon: mode !== 'horizontal' ? mergedExpandIcon : null,\n    props: (0, _objectSpread2.default)((0, _objectSpread2.default)({}, props), {}, {\n      isOpen: open,\n      // [Legacy] Not sure why need this mark\n      isSubMenu: true\n    })\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"\".concat(subMenuPrefixCls, \"-arrow\")\n  }))); // Cache mode if it change to `inline` which do not have popup motion\n\n  var triggerModeRef = React.useRef(mode);\n\n  if (mode !== 'inline') {\n    triggerModeRef.current = connectedPath.length > 1 ? 'vertical' : mode;\n  }\n\n  if (!overflowDisabled) {\n    var triggerMode = triggerModeRef.current; // Still wrap with Trigger here since we need avoid react re-mount dom node\n    // Which makes motion failed\n\n    titleNode = /*#__PURE__*/React.createElement(_PopupTrigger.default, {\n      mode: triggerMode,\n      prefixCls: subMenuPrefixCls,\n      visible: !internalPopupClose && open && mode !== 'inline',\n      popupClassName: popupClassName,\n      popupOffset: popupOffset,\n      popup: /*#__PURE__*/React.createElement(_MenuContext.default // Special handle of horizontal mode\n      , {\n        mode: triggerMode === 'horizontal' ? 'vertical' : triggerMode\n      }, /*#__PURE__*/React.createElement(_SubMenuList.default, {\n        id: popupId,\n        ref: popupRef\n      }, children)),\n      disabled: mergedDisabled,\n      onVisibleChange: onPopupVisibleChange\n    }, titleNode);\n  } // >>>>> Render\n\n\n  return /*#__PURE__*/React.createElement(_MenuContext.default, {\n    onItemClick: onMergedItemClick,\n    mode: mode === 'horizontal' ? 'vertical' : mode,\n    itemIcon: mergedItemIcon,\n    expandIcon: mergedExpandIcon\n  }, /*#__PURE__*/React.createElement(_rcOverflow.default.Item, (0, _extends2.default)({\n    role: \"none\"\n  }, restProps, {\n    component: \"li\",\n    style: style,\n    className: (0, _classnames.default)(subMenuPrefixCls, \"\".concat(subMenuPrefixCls, \"-\").concat(mode), className, (_classNames = {}, (0, _defineProperty2.default)(_classNames, \"\".concat(subMenuPrefixCls, \"-open\"), open), (0, _defineProperty2.default)(_classNames, \"\".concat(subMenuPrefixCls, \"-active\"), mergedActive), (0, _defineProperty2.default)(_classNames, \"\".concat(subMenuPrefixCls, \"-selected\"), childrenSelected), (0, _defineProperty2.default)(_classNames, \"\".concat(subMenuPrefixCls, \"-disabled\"), mergedDisabled), _classNames)),\n    onMouseEnter: onInternalMouseEnter,\n    onMouseLeave: onInternalMouseLeave\n  }), titleNode, !overflowDisabled && /*#__PURE__*/React.createElement(_InlineSubMenuList.default, {\n    id: popupId,\n    open: open,\n    keyPath: connectedPath\n  }, children)));\n};\n\nfunction SubMenu(props) {\n  var eventKey = props.eventKey,\n      children = props.children;\n  var connectedKeyPath = (0, _PathContext.useFullPath)(eventKey);\n  var childList = (0, _nodeUtil.parseChildren)(children, connectedKeyPath); // ==================== Record KeyPath ====================\n\n  var measure = (0, _PathContext.useMeasure)(); // eslint-disable-next-line consistent-return\n\n  React.useEffect(function () {\n    if (measure) {\n      measure.registerPath(eventKey, connectedKeyPath);\n      return function () {\n        measure.unregisterPath(eventKey, connectedKeyPath);\n      };\n    }\n  }, [connectedKeyPath]);\n  var renderNode; // ======================== Render ========================\n\n  if (measure) {\n    renderNode = childList;\n  } else {\n    renderNode = /*#__PURE__*/React.createElement(InternalSubMenu, props, childList);\n  }\n\n  return /*#__PURE__*/React.createElement(_PathContext.PathTrackerContext.Provider, {\n    value: connectedKeyPath\n  }, renderNode);\n}"]},"metadata":{},"sourceType":"script"}