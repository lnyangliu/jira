{"ast":null,"code":"const localStorageKey = '__auth_provider_token__';\nconst apiUrl = process.env.REACT_APP_API_URL;\nexport const getToken = () => window.localStorage.getItem(localStorageKey);\nexport const handleUserResponse = ({\n  user\n}) => {\n  window.localStorage.setItem(localStorageKey, user.token || '');\n  return user;\n};\nexport const login = data => {\n  return fetch(`${apiUrl}/login`, {\n    method: 'POST',\n    headers: {\n      \"content-type\": \"application/json; charset=utf-8\"\n    },\n    body: JSON.stringify(data)\n  }).then(async response => {\n    if (response.ok) {\n      return handleUserResponse(await response.json());\n    } else {\n      return Promise.reject(data);\n    }\n  });\n};\nexport const register = data => {\n  return fetch(`${apiUrl}/register`, {\n    method: 'POST',\n    headers: {\n      \"content-type\": \"application/json; charset=utf-8\"\n    },\n    body: JSON.stringify(data)\n  }).then(async response => {\n    if (response.ok) {\n      return handleUserResponse(await response.json());\n    } else {\n      return Promise.reject(data);\n    }\n  });\n};\nexport const logout = async () => window.localStorage.removeItem(localStorageKey);","map":{"version":3,"sources":["/Users/liuyang/Documents/yideng/jira/src/auth-provider.ts"],"names":["localStorageKey","apiUrl","process","env","REACT_APP_API_URL","getToken","window","localStorage","getItem","handleUserResponse","user","setItem","token","login","data","fetch","method","headers","body","JSON","stringify","then","response","ok","json","Promise","reject","register","logout","removeItem"],"mappings":"AAEA,MAAMA,eAAe,GAAG,yBAAxB;AAEA,MAAMC,MAAM,GAAGC,OAAO,CAACC,GAAR,CAAYC,iBAA3B;AAEA,OAAO,MAAMC,QAAQ,GAAG,MAAMC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BR,eAA5B,CAAvB;AAEP,OAAO,MAAMS,kBAAkB,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAA0B;AACxDJ,EAAAA,MAAM,CAACC,YAAP,CAAoBI,OAApB,CAA4BX,eAA5B,EAA6CU,IAAI,CAACE,KAAL,IAAc,EAA3D;AACA,SAAOF,IAAP;AACH,CAHM;AAKP,OAAO,MAAMG,KAAK,GAAIC,IAAD,IAAgD;AACjE,SAAOC,KAAK,CAAE,GAAEd,MAAO,QAAX,EAAoB;AAC5Be,IAAAA,MAAM,EAAE,MADoB;AAE5BC,IAAAA,OAAO,EAAE;AACL,sBAAgB;AADX,KAFmB;AAK5BC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeN,IAAf;AALsB,GAApB,CAAL,CAMJO,IANI,CAMC,MAAOC,QAAP,IAA8B;AAClC,QAAIA,QAAQ,CAACC,EAAb,EAAiB;AACb,aAAOd,kBAAkB,CAAC,MAAMa,QAAQ,CAACE,IAAT,EAAP,CAAzB;AACH,KAFD,MAEO;AACH,aAAOC,OAAO,CAACC,MAAR,CAAeZ,IAAf,CAAP;AACH;AACJ,GAZM,CAAP;AAaH,CAdM;AAeP,OAAO,MAAMa,QAAQ,GAAIb,IAAD,IAAgD;AACpE,SAAOC,KAAK,CAAE,GAAEd,MAAO,WAAX,EAAuB;AAC/Be,IAAAA,MAAM,EAAE,MADuB;AAE/BC,IAAAA,OAAO,EAAE;AACL,sBAAgB;AADX,KAFsB;AAK/BC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeN,IAAf;AALyB,GAAvB,CAAL,CAMJO,IANI,CAMC,MAAOC,QAAP,IAA8B;AAClC,QAAIA,QAAQ,CAACC,EAAb,EAAiB;AACb,aAAOd,kBAAkB,CAAC,MAAMa,QAAQ,CAACE,IAAT,EAAP,CAAzB;AACH,KAFD,MAEO;AACH,aAAOC,OAAO,CAACC,MAAR,CAAeZ,IAAf,CAAP;AACH;AACJ,GAZM,CAAP;AAaH,CAdM;AAgBP,OAAO,MAAMc,MAAM,GAAG,YAAYtB,MAAM,CAACC,YAAP,CAAoBsB,UAApB,CAA+B7B,eAA/B,CAA3B","sourcesContent":["import {User} from 'screens/project-list/search-panel'\n\nconst localStorageKey = '__auth_provider_token__'\n\nconst apiUrl = process.env.REACT_APP_API_URL\n\nexport const getToken = () => window.localStorage.getItem(localStorageKey)\n\nexport const handleUserResponse = ({user}: {user: User}) => {\n    window.localStorage.setItem(localStorageKey, user.token || '')\n    return user;\n}\n\nexport const login = (data: {username: string, password: string}) => {\n    return fetch(`${apiUrl}/login`, {\n        method: 'POST',\n        headers: {\n            \"content-type\": \"application/json; charset=utf-8\"\n        },\n        body: JSON.stringify(data)\n    }).then(async (response: Response) => {\n        if (response.ok) {\n            return handleUserResponse(await response.json())\n        } else {\n            return Promise.reject(data)\n        }\n    })\n}\nexport const register = (data: {username: string, password: string}) => {\n    return fetch(`${apiUrl}/register`, {\n        method: 'POST',\n        headers: {\n            \"content-type\": \"application/json; charset=utf-8\"\n        },\n        body: JSON.stringify(data)\n    }).then(async (response: Response) => {\n        if (response.ok) {\n            return handleUserResponse(await response.json())\n        } else {\n            return Promise.reject(data)\n        }\n    })\n}\n\nexport const logout = async () => window.localStorage.removeItem(localStorageKey)"]},"metadata":{},"sourceType":"module"}