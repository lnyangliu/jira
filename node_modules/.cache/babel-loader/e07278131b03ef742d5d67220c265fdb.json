{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = PopupTrigger;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _rcTrigger = _interopRequireDefault(require(\"rc-trigger\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _raf = _interopRequireDefault(require(\"rc-util/lib/raf\"));\n\nvar _MenuContext = require(\"../context/MenuContext\");\n\nvar _placements = require(\"../placements\");\n\nvar _motionUtil = require(\"../utils/motionUtil\");\n\nvar popupPlacementMap = {\n  horizontal: 'bottomLeft',\n  vertical: 'rightTop',\n  'vertical-left': 'rightTop',\n  'vertical-right': 'leftTop'\n};\n\nfunction PopupTrigger(_ref) {\n  var prefixCls = _ref.prefixCls,\n      visible = _ref.visible,\n      children = _ref.children,\n      popup = _ref.popup,\n      popupClassName = _ref.popupClassName,\n      popupOffset = _ref.popupOffset,\n      disabled = _ref.disabled,\n      mode = _ref.mode,\n      onVisibleChange = _ref.onVisibleChange;\n\n  var _React$useContext = React.useContext(_MenuContext.MenuContext),\n      getPopupContainer = _React$useContext.getPopupContainer,\n      rtl = _React$useContext.rtl,\n      subMenuOpenDelay = _React$useContext.subMenuOpenDelay,\n      subMenuCloseDelay = _React$useContext.subMenuCloseDelay,\n      builtinPlacements = _React$useContext.builtinPlacements,\n      triggerSubMenuAction = _React$useContext.triggerSubMenuAction,\n      forceSubMenuRender = _React$useContext.forceSubMenuRender,\n      motion = _React$useContext.motion,\n      defaultMotions = _React$useContext.defaultMotions;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n      innerVisible = _React$useState2[0],\n      setInnerVisible = _React$useState2[1];\n\n  var placement = rtl ? (0, _objectSpread2.default)((0, _objectSpread2.default)({}, _placements.placementsRtl), builtinPlacements) : (0, _objectSpread2.default)((0, _objectSpread2.default)({}, _placements.placements), builtinPlacements);\n  var popupPlacement = popupPlacementMap[mode];\n  var targetMotion = (0, _motionUtil.getMotion)(mode, motion, defaultMotions);\n  var mergedMotion = (0, _objectSpread2.default)((0, _objectSpread2.default)({}, targetMotion), {}, {\n    leavedClassName: \"\".concat(prefixCls, \"-hidden\"),\n    removeOnLeave: false,\n    motionAppear: true\n  }); // Delay to change visible\n\n  var visibleRef = React.useRef();\n  React.useEffect(function () {\n    visibleRef.current = (0, _raf.default)(function () {\n      setInnerVisible(visible);\n    });\n    return function () {\n      _raf.default.cancel(visibleRef.current);\n    };\n  }, [visible]);\n  return /*#__PURE__*/React.createElement(_rcTrigger.default, {\n    prefixCls: prefixCls,\n    popupClassName: (0, _classnames.default)(\"\".concat(prefixCls, \"-popup\"), (0, _defineProperty2.default)({}, \"\".concat(prefixCls, \"-rtl\"), rtl), popupClassName),\n    stretch: mode === 'horizontal' ? 'minWidth' : null,\n    getPopupContainer: getPopupContainer,\n    builtinPlacements: placement,\n    popupPlacement: popupPlacement,\n    popupVisible: innerVisible,\n    popup: popup,\n    popupAlign: popupOffset && {\n      offset: popupOffset\n    },\n    action: disabled ? [] : [triggerSubMenuAction],\n    mouseEnterDelay: subMenuOpenDelay,\n    mouseLeaveDelay: subMenuCloseDelay,\n    onPopupVisibleChange: onVisibleChange,\n    forceRender: forceSubMenuRender,\n    popupMotion: mergedMotion\n  }, children);\n}","map":{"version":3,"sources":["/Users/liuyang/Documents/yideng/jira/node_modules/rc-menu/lib/SubMenu/PopupTrigger.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","default","PopupTrigger","_defineProperty2","_objectSpread2","_slicedToArray2","React","_rcTrigger","_classnames","_raf","_MenuContext","_placements","_motionUtil","popupPlacementMap","horizontal","vertical","_ref","prefixCls","visible","children","popup","popupClassName","popupOffset","disabled","mode","onVisibleChange","_React$useContext","useContext","MenuContext","getPopupContainer","rtl","subMenuOpenDelay","subMenuCloseDelay","builtinPlacements","triggerSubMenuAction","forceSubMenuRender","motion","defaultMotions","_React$useState","useState","_React$useState2","innerVisible","setInnerVisible","placement","placementsRtl","placements","popupPlacement","targetMotion","getMotion","mergedMotion","leavedClassName","concat","removeOnLeave","motionAppear","visibleRef","useRef","useEffect","current","cancel","createElement","stretch","popupVisible","popupAlign","offset","action","mouseEnterDelay","mouseLeaveDelay","onPopupVisibleChange","forceRender","popupMotion"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = PopupTrigger;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _rcTrigger = _interopRequireDefault(require(\"rc-trigger\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _raf = _interopRequireDefault(require(\"rc-util/lib/raf\"));\n\nvar _MenuContext = require(\"../context/MenuContext\");\n\nvar _placements = require(\"../placements\");\n\nvar _motionUtil = require(\"../utils/motionUtil\");\n\nvar popupPlacementMap = {\n  horizontal: 'bottomLeft',\n  vertical: 'rightTop',\n  'vertical-left': 'rightTop',\n  'vertical-right': 'leftTop'\n};\n\nfunction PopupTrigger(_ref) {\n  var prefixCls = _ref.prefixCls,\n      visible = _ref.visible,\n      children = _ref.children,\n      popup = _ref.popup,\n      popupClassName = _ref.popupClassName,\n      popupOffset = _ref.popupOffset,\n      disabled = _ref.disabled,\n      mode = _ref.mode,\n      onVisibleChange = _ref.onVisibleChange;\n\n  var _React$useContext = React.useContext(_MenuContext.MenuContext),\n      getPopupContainer = _React$useContext.getPopupContainer,\n      rtl = _React$useContext.rtl,\n      subMenuOpenDelay = _React$useContext.subMenuOpenDelay,\n      subMenuCloseDelay = _React$useContext.subMenuCloseDelay,\n      builtinPlacements = _React$useContext.builtinPlacements,\n      triggerSubMenuAction = _React$useContext.triggerSubMenuAction,\n      forceSubMenuRender = _React$useContext.forceSubMenuRender,\n      motion = _React$useContext.motion,\n      defaultMotions = _React$useContext.defaultMotions;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n      innerVisible = _React$useState2[0],\n      setInnerVisible = _React$useState2[1];\n\n  var placement = rtl ? (0, _objectSpread2.default)((0, _objectSpread2.default)({}, _placements.placementsRtl), builtinPlacements) : (0, _objectSpread2.default)((0, _objectSpread2.default)({}, _placements.placements), builtinPlacements);\n  var popupPlacement = popupPlacementMap[mode];\n  var targetMotion = (0, _motionUtil.getMotion)(mode, motion, defaultMotions);\n  var mergedMotion = (0, _objectSpread2.default)((0, _objectSpread2.default)({}, targetMotion), {}, {\n    leavedClassName: \"\".concat(prefixCls, \"-hidden\"),\n    removeOnLeave: false,\n    motionAppear: true\n  }); // Delay to change visible\n\n  var visibleRef = React.useRef();\n  React.useEffect(function () {\n    visibleRef.current = (0, _raf.default)(function () {\n      setInnerVisible(visible);\n    });\n    return function () {\n      _raf.default.cancel(visibleRef.current);\n    };\n  }, [visible]);\n  return /*#__PURE__*/React.createElement(_rcTrigger.default, {\n    prefixCls: prefixCls,\n    popupClassName: (0, _classnames.default)(\"\".concat(prefixCls, \"-popup\"), (0, _defineProperty2.default)({}, \"\".concat(prefixCls, \"-rtl\"), rtl), popupClassName),\n    stretch: mode === 'horizontal' ? 'minWidth' : null,\n    getPopupContainer: getPopupContainer,\n    builtinPlacements: placement,\n    popupPlacement: popupPlacement,\n    popupVisible: innerVisible,\n    popup: popup,\n    popupAlign: popupOffset && {\n      offset: popupOffset\n    },\n    action: disabled ? [] : [triggerSubMenuAction],\n    mouseEnterDelay: subMenuOpenDelay,\n    mouseLeaveDelay: subMenuCloseDelay,\n    onPopupVisibleChange: onVisibleChange,\n    forceRender: forceSubMenuRender,\n    popupMotion: mergedMotion\n  }, children);\n}"]},"metadata":{},"sourceType":"script"}